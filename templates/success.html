<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Processing…</title>
  <script>
    async function checkStatus() {
      const jobId = "{{ job_id }}";
      const response = await fetch(`/status/${jobId}`);
      const data = await response.json();

      if (data.status === "done") {
        document.getElementById("status").innerHTML = `
          ✅ Done! <br>
          <a href="/download/${jobId}">Download your file</a>
        `;
      } else if (data.status === "error") {
        document.getElementById("status").innerHTML = "❌ Error: " + data.message;
      } else {
        setTimeout(checkStatus, 3000); // poll every 3 seconds
      }
    }
    window.onload = checkStatus;
  </script>
</head>
<body>
  <h1>Your file is being processed…</h1>
  <p>Job ID: {{ job_id }}</p>
  <div id="status">⏳ Please wait. Your document will be available soon.</div>
  <p><a href="/">Upload Another File</a></p>
</body>
</html>
